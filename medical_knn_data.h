/* Medical Blood Cell Classification KNN Data - ARM C Header */
/* Generated by medical hardware generator */
#ifndef MEDICAL_KNN_DATA_H
#define MEDICAL_KNN_DATA_H

#include <stdint.h>

// Dataset dimensions
#define N_TRAIN_SAMPLES 800
#define N_TEST_SAMPLES 200
#define N_FEATURES 60
#define N_CELL_TYPES 12

// Adaptive K-NN parameters
#define K_MIN 3
#define K_MAX 20

// Cell type names
const char* cell_type_names[N_CELL_TYPES] = {
    "Neutrophil-Band",
    "Neutrophil-Segmented",
    "Lymphocyte-Typical",
    "Lymphocyte-Atypical",
    "Monocyte",
    "Eosinophil",
    "Basophil",
    "Promyelocyte",
    "Myelocyte",
    "Metamyelocyte",
    "Erythroblast",
    "Blast"
};

// Training data sample (first 10 samples)
const uint8_t train_samples_sample[10][N_FEATURES] = {
    {108, 82, 79, 50, 141, 92, 118, 241, 28, 157, 221, 176, 96, 110, 93, 160, 121, 146, 151, 110, 143, 84, 119, 120, 104, 147, 121, 129, 146, 124, 134, 123, 125, 109, 78, 171, 154, 122, 144, 97, 94, 145, 132, 102, 124, 148, 108, 161, 134, 155, 123, 150, 132, 149, 123, 156, 157, 138, 108, 150},  // Myelocyte
    {124, 103, 97, 75, 161, 102, 75, 140, 227, 202, 233, 178, 102, 120, 112, 149, 143, 118, 124, 105, 147, 133, 127, 119, 80, 119, 150, 135, 151, 123, 147, 116, 118, 128, 110, 145, 120, 140, 107, 74, 99, 131, 163, 87, 128, 138, 150, 136, 153, 152, 140, 145, 130, 157, 134, 104, 131, 107, 88, 171},  // Metamyelocyte
    {245, 196, 190, 82, 95, 85, 118, 124, 104, 127, 209, 165, 164, 128, 178, 154, 112, 131, 133, 118, 129, 132, 94, 168, 122, 131, 84, 129, 123, 118, 154, 118, 135, 113, 110, 126, 148, 119, 130, 99, 114, 136, 109, 126, 84, 142, 111, 150, 173, 162, 93, 142, 144, 110, 132, 106, 139, 180, 143, 196},  // Lymphocyte-Typical
    {149, 126, 127, 124, 135, 125, 108, 132, 104, 185, 95, 9, 201, 126, 144, 153, 79, 121, 139, 112, 147, 87, 107, 86, 117, 114, 147, 140, 120, 91, 133, 134, 147, 108, 80, 66, 144, 140, 100, 81, 77, 180, 141, 115, 115, 134, 81, 129, 87, 111, 179, 146, 125, 132, 136, 134, 115, 101, 133, 156},  // Basophil
    {142, 129, 133, 192, 227, 108, 19, 176, 107, 68, 232, 156, 160, 86, 143, 170, 127, 132, 133, 96, 100, 152, 103, 111, 71, 139, 156, 143, 106, 81, 137, 81, 170, 160, 91, 136, 133, 100, 66, 136, 75, 152, 131, 70, 132, 111, 130, 146, 85, 143, 185, 88, 179, 125, 138, 127, 73, 86, 21, 87},  // Eosinophil
    {133, 117, 120, 103, 120, 112, 102, 135, 111, 171, 96, 13, 183, 121, 112, 160, 138, 137, 148, 113, 146, 115, 109, 142, 120, 111, 113, 96, 125, 85, 144, 102, 128, 133, 118, 97, 140, 153, 115, 75, 113, 111, 134, 125, 136, 144, 139, 140, 113, 125, 169, 160, 130, 112, 142, 139, 109, 153, 94, 114},  // Basophil
    {172, 90, 16, 157, 9, 59, 117, 113, 105, 117, 228, 162, 166, 95, 123, 153, 139, 144, 148, 108, 150, 126, 124, 129, 95, 122, 137, 115, 141, 105, 154, 118, 131, 128, 108, 163, 136, 135, 76, 123, 108, 149, 154, 120, 133, 151, 132, 118, 148, 132, 158, 132, 131, 147, 130, 145, 88, 162, 134, 135},  // Monocyte
    {28, 220, 127, 138, 101, 87, 130, 110, 95, 141, 201, 170, 80, 137, 118, 141, 111, 124, 141, 121, 144, 105, 137, 142, 100, 135, 114, 128, 110, 108, 115, 107, 128, 121, 98, 119, 102, 156, 88, 121, 100, 141, 135, 103, 135, 123, 146, 150, 168, 109, 147, 163, 110, 140, 139, 96, 82, 101, 94, 163},  // Neutrophil-Segmented
    {153, 114, 99, 114, 203, 57, 195, 125, 127, 112, 191, 154, 39, 107, 115, 145, 113, 164, 114, 84, 138, 131, 150, 142, 114, 168, 109, 75, 132, 126, 106, 187, 164, 73, 135, 99, 156, 121, 132, 59, 134, 132, 90, 101, 106, 141, 81, 163, 114, 177, 126, 141, 166, 127, 145, 93, 139, 85, 46, 138},  // Lymphocyte-Atypical
    {133, 102, 110, 108, 140, 195, 139, 80, 90, 128, 204, 174, 96, 125, 119, 157, 128, 134, 124, 127, 135, 142, 135, 125, 96, 160, 94, 97, 121, 90, 138, 126, 135, 154, 101, 170, 120, 122, 116, 80, 115, 126, 149, 118, 118, 137, 112, 130, 147, 141, 149, 183, 123, 127, 172, 132, 135, 79, 118, 173}
};

const uint8_t train_labels_sample[10] = {8, 9, 2, 6, 5, 6, 4, 1, 3, 7};

// Test data sample (first 5 samples)
const uint8_t test_samples_sample[5][N_FEATURES] = {
    {111, 86, 80, 44, 142, 83, 121, 247, 27, 153, 219, 175, 119, 136, 86, 137, 131, 154, 126, 124, 133, 137, 126, 109, 87, 132, 153, 105, 155, 127, 128, 135, 104, 127, 82, 140, 143, 119, 105, 121, 108, 136, 133, 104, 115, 134, 113, 156, 161, 129, 103, 176, 134, 140, 142, 141, 89, 155, 114, 149},  // Expected: Myelocyte
    {167, 109, 89, 118, 225, 35, 239, 122, 132, 109, 195, 155, 33, 133, 123, 145, 111, 251, 148, 113, 94, 107, 166, 141, 155, 111, 54, 121, 195, 136, 185, 99, 94, 154, 128, 152, 61, 189, 57, 61, 255, 97, 153, 185, 255, 189, 138, 168, 170, 116, 65, 158, 202, 162, 98, 43, 106, 56, 77, 43},  // Expected: Lymphocyte-Atypical
    {144, 109, 120, 81, 198, 21, 45, 5, 48, 170, 227, 166, 195, 117, 141, 157, 132, 128, 110, 120, 129, 133, 145, 151, 86, 143, 132, 107, 130, 146, 157, 133, 125, 113, 111, 180, 119, 106, 86, 111, 100, 129, 147, 136, 94, 151, 118, 106, 141, 117, 183, 132, 124, 157, 157, 134, 113, 105, 105, 142},  // Expected: Erythroblast
    {116, 100, 95, 64, 158, 103, 69, 136, 234, 191, 236, 177, 79, 101, 126, 149, 94, 106, 133, 82, 145, 158, 152, 140, 127, 151, 140, 128, 90, 95, 128, 125, 101, 137, 95, 131, 115, 144, 120, 149, 104, 138, 140, 83, 144, 115, 140, 65, 124, 119, 104, 151, 143, 121, 117, 129, 95, 121, 112, 116},  // Expected: Metamyelocyte
    {102, 79, 96, 0, 174, 6, 54, 27, 89, 90, 230, 150, 149, 132, 127, 158, 132, 111, 120, 127, 138, 121, 165, 149, 111, 142, 129, 115, 119, 103, 187, 122, 126, 117, 108, 129, 131, 141, 127, 92, 84, 151, 128, 83, 122, 102, 121, 123, 143, 123, 145, 164, 121, 137, 166, 190, 146, 147, 91, 145}
};

const uint8_t test_labels_sample[5] = {8, 3, 10, 9, 10};

// Helper functions (implement in your C code)
uint16_t l1_distance(const uint8_t* sample1, const uint8_t* sample2, uint16_t n_features);
uint8_t adaptive_knn_predict(const uint8_t* query_sample, uint8_t* confidence);
float calculate_confidence(uint8_t k, const uint16_t* distances, const uint8_t* labels);

#endif // MEDICAL_KNN_DATA_H
